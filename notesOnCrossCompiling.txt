Conan Profile for linux_to_win64

luis@ryzenLinux:~/.conan/profiles$ cat linux_to_win64 
        toolchain=/usr/x86_64-w64-mingw32 # Adjust this path
        target_host=x86_64-w64-mingw32
        cc_compiler=gcc
        cxx_compiler=g++

        [env]
        CONAN_CMAKE_FIND_ROOT_PATH=$toolchain
        CHOST=$target_host
        AR=$target_host-ar
        AS=$target_host-as
        RANLIB=$target_host-ranlib
        CC=$target_host-$cc_compiler
        CXX=$target_host-$cxx_compiler
        STRIP=$target_host-strip
        RC=$target_host-windres

        [settings]
        # We are cross-building to Windows
        os=Windows
        arch=x86_64
        compiler=gcc

        # Adjust to the gcc version of your MinGW package
        compiler.version=9.3
        compiler.libcxx=libstdc++11
        build_type=Release

CMake Toolchain file:
        set(CMAKE_SYSTEM_NAME Windows)
        set(TOOLCHAIN_PREFIX x86_64-w64-mingw32)
        set(CMAKE_SYSROOT /usr/lib/gcc/x86_64-w64-mingw32/9.3-posix)

        set(CMAKE_C_COMPILER ${TOOLCHAIN_PREFIX}-gcc)
        set(CMAKE_CXX_COMPILER ${TOOLCHAIN_PREFIX}-g++)
        set(CMAKE_Fortran_COMPILER ${TOOLCHAIN_PREFIX}-gfortran)
        set(CMAKE_RC_COMPILER ${TOOLCHAIN_PREFIX}-windres)



For configuring and building on mingw

conan install --build missing --profile linux_to_win64 ../
cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_TOOLCHAIN_FILE=../cmake/linux-mingw64.cmake -DBUILD_SHARED_LIBS=OFF ../

It is possible to build the library and all the applications if the exiv2lib is STATIC
(-DBUILD_SHARED_LIBS=OFF). However, when building the SHARED library we get this linking error:

[ 56%] Linking CXX executable ../bin/exiv2.exe
/usr/bin/x86_64-w64-mingw32-ld: CMakeFiles/exiv2.dir/objects.a(params.cpp.obj):params.cpp:(.text$_ZN5Exiv210BasicErrorIcEC1INSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEENS_9ErrorCodeERKT_[_ZN5Exiv210BasicErrorIcEC1INSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEENS_9ErrorCodeERKT_]+0x95): undefined reference to `__imp__ZN5Exiv210BasicErrorIcE6setMsgEv'
collect2: error: ld returned 1 exit status

As discussed in the following link, we have to deal with the BasicError::setMsg monster:
https://github.com/Exiv2/exiv2/issues/663
